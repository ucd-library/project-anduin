<html>
  <head>
    <title>Anduin</title>
    <script src="https://brand.library.ucdavis.edu/ui/loader.js?ignorePolyfills=true"></script>
    <script src="/config.js"></script>
    <style>
      .content {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(25%, 1fr));
        gap: 3rem;
        margin-top: 1rem;
        justify-content: center;
      }

      @container (min-width: 600px) {
        /* .content {
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        } */
      }

    </style>
  </head>
  <body>
    <ucd-theme-header 
      figure-src="https://brand.library.ucdavis.edu/img/book-logo.png" 
      slogan="Powered by Anduin">
      <!-- <ucd-theme-primary-nav> 
      </ucd-theme-primary-nav> -->
      <ucd-theme-quick-links title="" style-modifiers="highlight">
        <a href="/auth/logout">Logout</a>
      </ucd-theme-quick-links>
    </ucd-theme-header>

    <div class="content"></div>

    <script>
      function createBtn(opts={}) {
        return `<div class="category-brand--${opts.color || 'thiebaud-icing'}" id="${opts.name}">
        <div class="factoid factoid--brackets">
          <a class="factoid__link" href="${opts.url || opts.link}" id="${opts.name}-link">
            <div class="factoid__bracket-one"></div>
            <div class="factoid__bracket-wrapper">
              <div class="factoid__figure factoid__icon">
                <span class="${opts.icon || 'fas fa-fingerprint'}"></span>
              </div>
              <div class="factoid__body">
                <h2 class="factoid__big-text">${opts.title}</h2>
                <h3 class="factoid__small-text">
                  <div class="no-wrap">${opts.subtitle}</div> 
                </h3>
              </div>
            </div>
            <div class="factoid__bracket-two"></div>
          </a>
        </div>
      </div>`;
      }

      document.title = APP_CONFIG.appName;
      document.addEventListener('DOMContentLoaded', async () => {
        document.querySelector('ucd-theme-header').setAttribute('site-name', APP_CONFIG.appName);
        document.querySelector('ucd-theme-quick-links').title = 'Welcome, '+APP_CONFIG.user.firstName;

        const contentEl = document.querySelector('.content');
        let buttonHTML = '';
        for( let service of APP_CONFIG.services  ) {
          buttonHTML += createBtn(service);
        }
        contentEl.innerHTML = buttonHTML;
      });
    </script>
  </body>
</html>